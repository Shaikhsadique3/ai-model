<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Churn Prediction</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { 
            background-color: #f8f9fa; 
            padding-bottom: 2rem;
        }
        .prediction-card {
            display: none;
            margin-top: 20px;
            transition: all 0.3s ease;
        }
        .card {
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .btn-primary {
            padding: 0.5rem 2rem;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container py-5">
        <h1 class="text-center mb-4">Customer Churn Prediction</h1>
        
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card shadow">
                    <div class="card-body">
                        <form id="predictionForm" class="needs-validation" novalidate>
                            <div class="mb-3">
                                <label for="days_since_signup" class="form-label">Days Since Signup</label>
                                <input type="number" class="form-control" id="days_since_signup" required>
                            </div>
                            <div class="mb-3">
                                <label for="monthly_revenue" class="form-label">Monthly Revenue</label>
                                <input type="number" class="form-control" id="monthly_revenue" required>
                            </div>
                            <div class="mb-3">
                                <label for="number_of_logins_last30days" class="form-label">Number of Logins (Last 30 Days)</label>
                                <input type="number" class="form-control" id="number_of_logins_last30days" required>
                            </div>
                            <div class="mb-3">
                                <label for="active_features_used" class="form-label">Active Features Used</label>
                                <input type="number" class="form-control" id="active_features_used" required>
                            </div>
                            <div class="mb-3">
                                <label for="support_tickets_opened" class="form-label">Support Tickets Opened</label>
                                <input type="number" class="form-control" id="support_tickets_opened" required>
                            </div>
                            <div class="mb-3">
                                <label for="last_payment_status" class="form-label">Last Payment Status</label>
                                <select class="form-select" id="last_payment_status" required>
                                    <option value="0">Success</option>
                                    <option value="1">Failed</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="subscription_plan" class="form-label">Subscription Plan</label>
                                <select class="form-select" id="subscription_plan" required>
                                    <option value="basic">Basic</option>
                                    <option value="pro">Pro</option>
                                    <option value="enterprise">Enterprise</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Predict Churn</button>
                        </form>
                    </div>
                </div>

                <div id="predictionResult" class="card prediction-card">
                    <div class="card-body">
                        <h5 class="card-title text-center mb-4">Prediction Result</h5>
                        <p class="card-text text-center" id="predictionText"></p>
                        
                        <div id="timeToChurn" class="alert alert-warning mt-3" style="display: none;">
                            <h6 class="alert-heading">Time to Potential Churn</h6>
                            <p id="daysToChurn" class="mb-0"></p>
                        </div>

                        <div id="riskFactors" class="mt-3" style="display: none;">
                            <h6 class="text-danger">Risk Factors</h6>
                            <ul id="riskFactorsList" class="list-unstyled"></ul>
                        </div>

                        <div id="retentionFactors" class="mt-3" style="display: none;">
                            <h6 class="text-success">Retention Factors</h6>
                            <ul id="retentionFactorsList" class="list-unstyled"></ul>
                        </div>
                        
                        <div id="comprehensionHelp" class="mt-3 border-top pt-3">
                            <h6 class="text-info">About Understanding Score</h6>
                            <p class="small text-muted">
                                The Understanding Score (0-100) measures how clear and actionable this prediction is:
                                <ul class="small text-muted">
                                    <li>80-100: Excellent clarity with specific insights</li>
                                    <li>50-79: Good understanding with some actionable information</li>
                                    <li>0-49: Basic prediction with limited details</li>
                                </ul>
                            </p>
                        </div>
                            <h6 class="text-danger">Reasons for Potential Churn:</h6>
                            <ul class="list-group list-group-flush text-start" id="reasonsList">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </div>
    <script src="{{ url_for('static', path='script.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>